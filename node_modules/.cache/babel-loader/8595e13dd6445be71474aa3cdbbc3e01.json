{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState, useCallback } from \"react\";\nimport alanBtn from \"@alan-ai/alan-sdk-web\";\nimport { useCart } from \"../context/CartContext\";\nimport storeItems from \"../items.json\";\nconst COMMANDS = {\n  OPEN_CART: \"open-cart\",\n  CLOSE_CART: \"close-cart\",\n  ADD_ITEM: \"add-item\",\n  REMOVE_ITEM: \"remove-item\",\n  PURCHASE_ITEMS: \"purchase-items\"\n};\nexport default function useAlan() {\n  _s();\n\n  const [alanInstance, setAlanInstance] = useState();\n  const {\n    setShowCartItems,\n    isCartEmpty,\n    addToCart,\n    removeFromCart,\n    cart,\n    checkout\n  } = useCart();\n  const openCart = useCallback(() => {\n    if (isCartEmpty) {\n      alanInstance.playText(\"You have no items in your cart\");\n    } else {\n      alanInstance.playText(\"Opening cart\");\n      setShowCartItems(true);\n    }\n  }, [alanInstance, isCartEmpty, setShowCartItems]);\n  const closeCart = useCallback(() => {\n    if (isCartEmpty) {\n      alanInstance.playText(\"You have no items in your cart\");\n    } else {\n      alanInstance.playText(\"Closing cart\");\n      setShowCartItems(false);\n    }\n  }, [alanInstance, isCartEmpty, setShowCartItems]);\n  const addItem = useCallback(({\n    detail: {\n      name,\n      quantity\n    }\n  }) => {\n    const item = storeItems.find(i => i.name.toLowerCase() === name.toLowerCase());\n\n    if (item == null) {\n      alanInstance.playText(`I cannot find the ${name} item`);\n    } else {\n      addToCart(item.id, quantity);\n      alanInstance.playText(`Add ${quantity} of the ${name} item to your cart`);\n    }\n  }, [alanInstance, addToCart]);\n  const removeItem = useCallback(({\n    detail: {\n      name\n    }\n  }) => {\n    const entry = cart.find(e => e.item.name.toLowerCase() === name.toLowerCase());\n\n    if (entry == null) {\n      alanInstance.playText(`I cannot find the ${name} item in your cart`);\n    } else {\n      removeFromCart(entry.itemId);\n      alanInstance.playText(`Removed the ${name} item from your cart`);\n    }\n  }, [alanInstance, removeFromCart, cart]);\n  const purchaseItems = useCallback(() => {\n    if (isCartEmpty) {\n      alanInstance.playText(\"Your cart is empty\");\n    } else {\n      alanInstance.playText(\"Checking out\");\n      checkout();\n    }\n  }, [alanInstance, isCartEmpty, checkout]);\n  useEffect(() => {\n    window.addEventListener(COMMANDS.OPEN_CART, openCart);\n    window.addEventListener(COMMANDS.CLOSE_CART, closeCart);\n    window.addEventListener(COMMANDS.ADD_ITEM, addItem);\n    window.addEventListener(COMMANDS.REMOVE_ITEM, removeItem);\n    window.addEventListener(COMMANDS.PURCHASE_ITEMS, purchaseItems);\n    return () => {\n      window.removeEventListener(COMMANDS.OPEN_CART, openCart);\n      window.removeEventListener(COMMANDS.CLOSE_CART, closeCart);\n      window.removeEventListener(COMMANDS.ADD_ITEM, addItem);\n      window.removeEventListener(COMMANDS.REMOVE_ITEM, removeItem);\n      window.removeEventListener(COMMANDS.PURCHASE_ITEMS, purchaseItems);\n    };\n  }, [openCart, closeCart, addItem, removeItem, purchaseItems]);\n  useEffect(() => {\n    if (alanInstance != null) return;\n    setAlanInstance(alanBtn({\n      top: \"15px\",\n      left: \"15px\",\n      key: process.env.REACT_APP_ALAN_KEY,\n      onCommand: ({\n        command,\n        payload\n      }) => {\n        window.dispatchEvent(new CustomEvent(command, {\n          detail: payload\n        }));\n      }\n    }));\n  }, []);\n  return null;\n}\n\n_s(useAlan, \"IgYpCvobhB44WUUDN3A2iO3Cfuo=\", false, function () {\n  return [useCart];\n});","map":{"version":3,"sources":["/Users/zareennaushad/Documents/FAISAL/ios/Voice Recognition Ecommerce App/Alan_AI_Voice_Recogition_Ecommerce_App/src/hooks/useAlan.js"],"names":["useEffect","useState","useCallback","alanBtn","useCart","storeItems","COMMANDS","OPEN_CART","CLOSE_CART","ADD_ITEM","REMOVE_ITEM","PURCHASE_ITEMS","useAlan","alanInstance","setAlanInstance","setShowCartItems","isCartEmpty","addToCart","removeFromCart","cart","checkout","openCart","playText","closeCart","addItem","detail","name","quantity","item","find","i","toLowerCase","id","removeItem","entry","e","itemId","purchaseItems","window","addEventListener","removeEventListener","top","left","key","process","env","REACT_APP_ALAN_KEY","onCommand","command","payload","dispatchEvent","CustomEvent"],"mappings":"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","sourcesContent":["import { useEffect, useState, useCallback } from \"react\"\nimport alanBtn from \"@alan-ai/alan-sdk-web\"\nimport { useCart } from \"../context/CartContext\"\nimport storeItems from \"../items.json\"\n\nconst COMMANDS = {\n  OPEN_CART: \"open-cart\",\n  CLOSE_CART: \"close-cart\",\n  ADD_ITEM: \"add-item\",\n  REMOVE_ITEM: \"remove-item\",\n  PURCHASE_ITEMS: \"purchase-items\"\n}\n\nexport default function useAlan() {\n  const [alanInstance, setAlanInstance] = useState()\n  const {\n    setShowCartItems,\n    isCartEmpty,\n    addToCart,\n    removeFromCart,\n    cart,\n    checkout\n  } = useCart()\n\n  const openCart = useCallback(() => {\n    if (isCartEmpty) {\n      alanInstance.playText(\"You have no items in your cart\")\n    } else {\n      alanInstance.playText(\"Opening cart\")\n      setShowCartItems(true)\n    }\n  }, [alanInstance, isCartEmpty, setShowCartItems])\n\n  const closeCart = useCallback(() => {\n    if (isCartEmpty) {\n      alanInstance.playText(\"You have no items in your cart\")\n    } else {\n      alanInstance.playText(\"Closing cart\")\n      setShowCartItems(false)\n    }\n  }, [alanInstance, isCartEmpty, setShowCartItems])\n\n  const addItem = useCallback(\n    ({ detail: { name, quantity } }) => {\n      const item = storeItems.find(\n        i => i.name.toLowerCase() === name.toLowerCase()\n      )\n      if (item == null) {\n        alanInstance.playText(`I cannot find the ${name} item`)\n      } else {\n        addToCart(item.id, quantity)\n        alanInstance.playText(\n          `Add ${quantity} of the ${name} item to your cart`\n        )\n      }\n    },\n    [alanInstance, addToCart]\n  )\n\n  const removeItem = useCallback(\n    ({ detail: { name } }) => {\n      const entry = cart.find(\n        e => e.item.name.toLowerCase() === name.toLowerCase()\n      )\n      if (entry == null) {\n        alanInstance.playText(`I cannot find the ${name} item in your cart`)\n      } else {\n        removeFromCart(entry.itemId)\n        alanInstance.playText(`Removed the ${name} item from your cart`)\n      }\n    },\n    [alanInstance, removeFromCart, cart]\n  )\n\n  const purchaseItems = useCallback(() => {\n    if (isCartEmpty) {\n      alanInstance.playText(\"Your cart is empty\")\n    } else {\n      alanInstance.playText(\"Checking out\")\n      checkout()\n    }\n  }, [alanInstance, isCartEmpty, checkout])\n\n  useEffect(() => {\n    window.addEventListener(COMMANDS.OPEN_CART, openCart)\n    window.addEventListener(COMMANDS.CLOSE_CART, closeCart)\n    window.addEventListener(COMMANDS.ADD_ITEM, addItem)\n    window.addEventListener(COMMANDS.REMOVE_ITEM, removeItem)\n    window.addEventListener(COMMANDS.PURCHASE_ITEMS, purchaseItems)\n\n    return () => {\n      window.removeEventListener(COMMANDS.OPEN_CART, openCart)\n      window.removeEventListener(COMMANDS.CLOSE_CART, closeCart)\n      window.removeEventListener(COMMANDS.ADD_ITEM, addItem)\n      window.removeEventListener(COMMANDS.REMOVE_ITEM, removeItem)\n      window.removeEventListener(COMMANDS.PURCHASE_ITEMS, purchaseItems)\n    }\n  }, [openCart, closeCart, addItem, removeItem, purchaseItems])\n\n  useEffect(() => {\n    if (alanInstance != null) return\n\n    setAlanInstance(\n      alanBtn({\n        top: \"15px\",\n        left: \"15px\",\n        key: process.env.REACT_APP_ALAN_KEY,\n        onCommand: ({ command, payload }) => {\n          window.dispatchEvent(new CustomEvent(command, { detail: payload }))\n        }\n      })\n    )\n  }, [])\n\n  return null\n}\n"]},"metadata":{},"sourceType":"module"}